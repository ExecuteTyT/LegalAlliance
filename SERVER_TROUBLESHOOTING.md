# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å —Å–∞–π—Ç–æ–º - –ß–µ–∫-–ª–∏—Å—Ç

## üîç –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–≤–µ—á–∞–µ—Ç –ª–∏ —Å–µ—Ä–≤–µ—Ä
ping 95.163.227.144

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤
curl -I http://95.163.227.144
curl -I https://alliance-pravo.ru
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PM2 (Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 status

# –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –∏–ª–∏ —É–ø–∞–ª–æ:
pm2 restart legal-alliance

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
pm2 logs legal-alliance --lines 100 --err

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ª–æ–≥–∏
pm2 logs legal-alliance --lines 100
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `online`
- ‚ùå –ï—Å–ª–∏ `errored` –∏–ª–∏ `stopped` - —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
- ‚ùå –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: `pm2 start ecosystem.config.cjs`

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Nginx
systemctl status nginx

# –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω:
systemctl start nginx
systemctl enable nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ –æ—à–∏–±–∫–∏
nginx -t

# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
systemctl reload nginx

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -f /var/log/nginx/legal-alliance-error.log

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞
tail -f /var/log/nginx/legal-alliance-access.log
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ Nginx –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `active (running)`
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–æ–π (`nginx -t` –±–µ–∑ –æ—à–∏–±–æ–∫)
- ‚ùå –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `/etc/nginx/sites-available/legal-alliance`

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Ä—Ç 3001
netstat -tulpn | grep 3001
# –∏–ª–∏
ss -tulpn | grep 3001
# –∏–ª–∏
lsof -i :3001

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç –ª–∏ Nginx –ø–æ—Ä—Ç—ã 80 –∏ 443
netstat -tulpn | grep :80
netstat -tulpn | grep :443
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–æ—Ä—Ç 3001 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–Ω—è—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º Node.js
- ‚úÖ –ü–æ—Ä—Ç—ã 80 –∏ 443 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–Ω—è—Ç—ã nginx
- ‚ùå –ï—Å–ª–∏ –ø–æ—Ä—Ç 3001 —Å–≤–æ–±–æ–¥–µ–Ω - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/LegalAlliance

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ dist –ø–∞–ø–∫–∏ (—Å–æ–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç)
ls -la dist/

# –ï—Å–ª–∏ dist –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ø—É—Å—Ç–∞—è - –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ .env —Ñ–∞–π–ª–∞
cat .env

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ server.js
ls -la server.js
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–∞–ø–∫–∞ `dist/` –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–π–ª—ã
- ‚úÖ –§–∞–π–ª `.env` –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- ‚ùå –ï—Å–ª–∏ `dist/` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç - –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `npm run build`

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞–ø—Ä—è–º—É—é

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞–ø—Ä—è–º—É—é
curl http://localhost:3001/api/health

# –ï—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é (–¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
cd /var/www/LegalAlliance
node server.js
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON: `{"status":"ok",...}`
- ‚ùå –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - —Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∏ –¥–æ–º–µ–Ω–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏
nslookup alliance-pravo.ru
dig alliance-pravo.ru

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
curl -vI https://alliance-pravo.ru 2>&1 | grep -i ssl
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ DNS –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ `95.163.227.144`
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º
- ‚ùå –ï—Å–ª–∏ DNS –Ω–µ–≤–µ—Ä–Ω—ã–π - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞

### 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É CPU
top
# –∏–ª–∏
htop
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ (>10%)
- ‚úÖ –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å
- ‚ùå –ï—Å–ª–∏ –¥–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω - –æ—á–∏—Å—Ç–∏—Ç–µ –ª–æ–≥–∏: `pm2 flush`, `journalctl --vacuum-time=7d`

### 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ firewall

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å UFW
ufw status

# –ï—Å–ª–∏ firewall –∞–∫—Ç–∏–≤–µ–Ω, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞
ufw status numbered

# –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ—Ä—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
ufw allow 80/tcp
ufw allow 443/tcp
ufw allow 22/tcp
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–æ—Ä—Ç—ã 80, 443, 22 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã
- ‚ùå –ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã - –æ—Ç–∫—Ä–æ–π—Ç–µ –∏—Ö

### 10. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–∏—Å—Ç–µ–º—ã

```bash
# –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
journalctl -u nginx -n 50
journalctl -u pm2 -n 50

# –õ–æ–≥–∏ PM2
pm2 logs legal-alliance --lines 50

# –õ–æ–≥–∏ Nginx
tail -50 /var/log/nginx/legal-alliance-error.log
tail -50 /var/log/nginx/legal-alliance-access.log
```

---

## üö® –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (502 Bad Gateway)

**–ü—Ä–∏—á–∏–Ω—ã:**
1. Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø–∞–ª–æ —Å –æ—à–∏–±–∫–æ–π
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PM2
pm2 status
pm2 logs legal-alliance --lines 50

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart legal-alliance

# 3. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
netstat -tulpn | grep 3001
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (504 Gateway Timeout)

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–ª–æ
2. –°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–∏–π –æ—Ç–≤–µ—Ç –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart legal-alliance

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
pm2 logs legal-alliance --err --lines 100

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (Connection refused)

**–ü—Ä–∏—á–∏–Ω—ã:**
1. Nginx –Ω–µ –∑–∞–ø—É—â–µ–Ω
2. Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç—ã
3. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Nginx
systemctl start nginx
systemctl status nginx

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall
ufw status
ufw allow 80/tcp
ufw allow 443/tcp

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
nginx -t
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–∞–ø–∫–∞ dist
2. –û—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ
3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ dist
ls -la /var/www/LegalAlliance/dist/

# 2. –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç - —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
cd /var/www/LegalAlliance
npm run build

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart legal-alliance

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª
cat .env
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å—Ç–µ–∫
2. –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º Let's Encrypt
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
certbot certificates

# 2. –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤—Ä—É—á–Ω—É—é
certbot renew

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx
systemctl reload nginx

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SSL
cat /etc/nginx/sites-available/legal-alliance | grep ssl
```

---

## üìã –ü–æ–ª–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –°—Ç–∞—Ç—É—Å PM2
echo "=== PM2 Status ==="
pm2 status

# 2. –°—Ç–∞—Ç—É—Å Nginx
echo "=== Nginx Status ==="
systemctl status nginx --no-pager

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
echo "=== Ports ==="
netstat -tulpn | grep -E ':(80|443|3001)'

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ dist
echo "=== Dist folder ==="
ls -la /var/www/LegalAlliance/dist/ | head -5

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
echo "=== Health Check ==="
curl -s http://localhost:3001/api/health || echo "FAILED"

# 6. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏ PM2
echo "=== PM2 Errors (last 10) ==="
pm2 logs legal-alliance --err --lines 10 --nostream

# 7. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏ Nginx
echo "=== Nginx Errors (last 10) ==="
tail -10 /var/log/nginx/legal-alliance-error.log

# 8. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
echo "=== Resources ==="
free -h | grep Mem
df -h / | tail -1
```

---

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

–ï—Å–ª–∏ —Å–∞–π—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –ø–æ—Ä—è–¥–∫–µ:

```bash
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/LegalAlliance

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 stop legal-alliance

# 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
git pull

# 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# 5. –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm run build

# 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª
cat .env

# 7. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 start ecosystem.config.cjs

# 8. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PM2
pm2 save

# 9. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# 10. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Nginx
systemctl status nginx
nginx -t
systemctl reload nginx

# 11. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
curl http://localhost:3001/api/health
```

---

## üìû –ß—Ç–æ —Å–æ–æ–±—â–∏—Ç—å –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∑–∞ –ø–æ–º–æ—â—å—é

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, —Å–æ–±–µ—Ä–∏—Ç–µ —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

1. **–í—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `pm2 status`**
2. **–í—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `systemctl status nginx`**
3. **–ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤ PM2:** `pm2 logs legal-alliance --lines 50`
4. **–ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤ Nginx:** `tail -50 /var/log/nginx/legal-alliance-error.log`
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç health check:** `curl http://localhost:3001/api/health`
6. **–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä—Ç–æ–≤:** `netstat -tulpn | grep 3001`
7. **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ .env (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π):** `cat .env | grep -v PASSWORD`

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- ‚úÖ Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ SSH –¥–æ—Å—Ç—É–ø –∑–∞—â–∏—â–µ–Ω
- ‚úÖ –ü–∞—Ä–æ–ª–∏ –≤ .env —Ñ–∞–π–ª–µ –Ω–µ —Ä–∞—Å–∫—Ä—ã—Ç—ã –≤ –ª–æ–≥–∞—Ö
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è

