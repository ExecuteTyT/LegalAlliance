# üö® –°–∞–π—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@95.163.227.144
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É

```bash
cd /var/www/LegalAlliance
bash QUICK_CHECK.sh
```

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PM2
pm2 status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Nginx
systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
netstat -tulpn | grep 3001
```

---

## üîß –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: PM2 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "stopped" –∏–ª–∏ "errored"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
pm2 logs legal-alliance --lines 50

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
pm2 restart legal-alliance

# –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å –Ω—É–ª—è
pm2 delete legal-alliance
cd /var/www/LegalAlliance
pm2 start ecosystem.config.cjs
pm2 save
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: Nginx –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Nginx
systemctl start nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
systemctl reload nginx
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–∞–ø–∫–∞ dist –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ø—É—Å—Ç–∞—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /var/www/LegalAlliance

# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
ls -la dist/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart legal-alliance
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 4: –ü–æ—Ä—Ç 3001 –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç
lsof -i :3001

# –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ
# –ï—Å–ª–∏ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω - –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart legal-alliance
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 5: –û—à–∏–±–∫–∞ 502 Bad Gateway

**–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ Nginx –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.**

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 status

# 2. –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ - –∑–∞–ø—É—Å—Ç–∏—Ç—å
pm2 start ecosystem.config.cjs

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs legal-alliance --lines 50

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–≤–µ—á–∞–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
curl http://localhost:3001/api/health
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 6: –û—à–∏–±–∫–∞ 504 Gateway Timeout

**–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–ª–æ –∏–ª–∏ –æ—Ç–≤–µ—á–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ.**

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart legal-alliance

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
pm2 logs legal-alliance --err --lines 100
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 7: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certbot certificates

# –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certbot renew

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx
systemctl reload nginx
```

---

## üìã –ü–æ–ª–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ –ø–æ—Ä—è–¥–∫—É:

```bash
# ‚úÖ 1. PM2 —Ä–∞–±–æ—Ç–∞–µ—Ç?
pm2 status
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: online

# ‚úÖ 2. Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç?
systemctl status nginx
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: active (running)

# ‚úÖ 3. –ü–æ—Ä—Ç 3001 —Å–ª—É—à–∞–µ—Ç—Å—è?
netstat -tulpn | grep 3001
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ—Ü–µ—Å—Å node

# ‚úÖ 4. –ü–∞–ø–∫–∞ dist —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?
ls -la /var/www/LegalAlliance/dist/
# –î–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–π–ª—ã

# ‚úÖ 5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞–µ—Ç?
curl http://localhost:3001/api/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON

# ‚úÖ 6. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞?
nginx -t
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: successful

# ‚úÖ 7. –ï—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ?
df -h
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >10% —Å–≤–æ–±–æ–¥–Ω–æ
```

---

## üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë
pm2 stop legal-alliance
systemctl stop nginx

# 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cd /var/www/LegalAlliance

# 3. –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# 4. –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm run build

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 start ecosystem.config.cjs
pm2 save

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å Nginx
systemctl start nginx

# 7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
pm2 status
systemctl status nginx
curl http://localhost:3001/api/health
```

---

## üìû –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –æ–±—Ä–∞—â–µ–Ω–∏–µ–º –∑–∞ –ø–æ–º–æ—â—å—é

1. ‚úÖ –í—ã–ø–æ–ª–Ω–∏–ª–∏ `pm2 status` - —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç?
2. ‚úÖ –í—ã–ø–æ–ª–Ω–∏–ª–∏ `systemctl status nginx` - —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç?
3. ‚úÖ –í—ã–ø–æ–ª–Ω–∏–ª–∏ `pm2 logs legal-alliance --lines 50` - –∫–∞–∫–∏–µ –æ—à–∏–±–∫–∏?
4. ‚úÖ –í—ã–ø–æ–ª–Ω–∏–ª–∏ `curl http://localhost:3001/api/health` - —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç?
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –Ω–∞–ª–∏—á–∏–µ –ø–∞–ø–∫–∏ `dist/`?
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ —Ñ–∞–π–ª `.env`?

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª **SERVER_TROUBLESHOOTING.md**

---

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs legal-alliance

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit

# –õ–æ–≥–∏ Nginx –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /var/log/nginx/legal-alliance-error.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∞–π—Ç–∞
watch -n 5 'curl -s http://localhost:3001/api/health'
```

