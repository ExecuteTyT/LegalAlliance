# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–ª, –Ω–æ –ø–µ—Ä–µ—Å—Ç–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å

## ‚úÖ DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- `alliance-pravo.ru` ‚Üí `95.163.227.144` ‚úÖ
- `www.alliance-pravo.ru` ‚Üí `95.163.227.144` ‚úÖ

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ IP

```bash
# –° —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–≤–µ—á–∞–µ—Ç –ª–∏ –ø–æ IP
curl -I http://95.163.227.144
curl -I https://95.163.227.144

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTTP 200 –∏–ª–∏ 301/302
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Nginx

```bash
# –°—Ç–∞—Ç—É—Å Nginx
systemctl status nginx

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl start nginx
systemctl enable nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
systemctl reload nginx

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -50 /var/log/nginx/legal-alliance-error.log
tail -50 /var/log/nginx/error.log
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å UFW
ufw status

# –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞
ufw status numbered

# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
ufw allow 80/tcp
ufw allow 443/tcp

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å iptables (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
iptables -L -n | grep -E '80|443'
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞—é—Ç—Å—è –ª–∏ –ø–æ—Ä—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã 80 –∏ 443
netstat -tulpn | grep -E ':(80|443)'
# –∏–ª–∏
ss -tulpn | grep -E ':(80|443)'

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã nginx
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
certbot certificates

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SSL –≤ Nginx
grep -A 10 "ssl_certificate" /etc/nginx/sites-available/legal-alliance

# –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å—Ç–µ–∫ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã
certbot renew
systemctl reload nginx
```

### 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx –Ω–∞ –æ—à–∏–±–∫–∏

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
tail -100 /var/log/nginx/legal-alliance-error.log | grep -i error

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø—ã
tail -50 /var/log/nginx/legal-alliance-access.log
```

### 7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ IP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–≤–Ω–µ (—Å –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ –æ–Ω–ª–∞–π–Ω-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: https://www.isitdownrightnow.com/alliance-pravo.ru.html
# –∏–ª–∏
curl -I https://alliance-pravo.ru
```

### 8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –∫–µ—à

```bash
# –û—á–∏—Å—Ç–∏—Ç—å DNS –∫–µ—à –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è systemd-resolved)
systemd-resolve --flush-caches

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–æ–º–µ–Ω —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
nslookup alliance-pravo.ru
dig alliance-pravo.ru A
```

### 9. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –¥–ª—è –¥–æ–º–µ–Ω–∞

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat /etc/nginx/sites-available/legal-alliance

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ server_name –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
grep server_name /etc/nginx/sites-available/legal-alliance

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: server_name alliance-pravo.ru www.alliance-pravo.ru;
```

### 10. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ IP —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –£–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–∏–π IP —Å–µ—Ä–≤–µ—Ä–∞
curl ifconfig.me
hostname -I

# –°—Ä–∞–≤–Ω–∏—Ç—å —Å DNS –∑–∞–ø–∏—Å—è–º–∏ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 95.163.227.144)
```

## üö® –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –≤–Ω–µ–∑–∞–ø–Ω–æ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### 1. Nginx —É–ø–∞–ª –∏–ª–∏ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl status nginx
systemctl start nginx
systemctl enable nginx
```

### 2. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å—Ç–µ–∫

```bash
certbot certificates
certbot renew
systemctl reload nginx
```

### 3. Firewall –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –ø–æ—Ä—Ç—ã

```bash
ufw status
ufw allow 80/tcp
ufw allow 443/tcp
```

### 4. –ò–∑–º–µ–Ω–∏–ª–∞—Å—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

```bash
nginx -t  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –æ—à–∏–±–∫–∏
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```

### 5. –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –Ω–æ Nginx –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

```bash
systemctl enable nginx  # –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
```

### 6. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º (DDoS, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
top
htop
netstat -an | grep ESTABLISHED | wc -l
```

## üìã –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã)

```bash
# 1. Nginx
systemctl status nginx
nginx -t

# 2. –ü–æ—Ä—Ç—ã
netstat -tulpn | grep -E ':(80|443)'

# 3. Firewall
ufw status

# 4. –õ–æ–≥–∏
tail -20 /var/log/nginx/legal-alliance-error.log

# 5. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl -I http://localhost
curl -I https://localhost

# 6. SSL
certbot certificates
```

## üîß –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

```bash
# 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Nginx
systemctl restart nginx

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart legal-alliance

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs legal-alliance --lines 20
tail -20 /var/log/nginx/legal-alliance-error.log

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl -I http://localhost:3001/api/health
curl -I http://localhost
```

## üìû –ß—Ç–æ —Å–æ–æ–±—â–∏—Ç—å –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∑–∞ –ø–æ–º–æ—â—å—é

1. –í—ã–≤–æ–¥ `systemctl status nginx`
2. –í—ã–≤–æ–¥ `nginx -t`
3. –í—ã–≤–æ–¥ `netstat -tulpn | grep -E ':(80|443)'`
4. –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤: `tail -50 /var/log/nginx/legal-alliance-error.log`
5. –†–µ–∑—É–ª—å—Ç–∞—Ç `curl -I http://95.163.227.144` (—Å —Å–µ—Ä–≤–µ—Ä–∞)
6. –†–µ–∑—É–ª—å—Ç–∞—Ç `certbot certificates`

